"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[916,55],{5184:function(e,t,n){var a=n(5898),s=n(6417);t.Z=()=>(0,s.jsx)(a.Z,{direction:"row",justifyContent:"space-between"})},6013:function(e,t,n){var a=n(7829),s=n(922),i=n(6417);t.Z=e=>{let{children:t,...n}=e;return(0,i.jsx)(s.Z,{sx:{maxWidth:{xs:400,lg:475},margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}},content:!1,...n,children:(0,i.jsx)(a.Z,{sx:{p:{xs:2,sm:3,xl:5}},children:t})})}},7547:function(e,t,n){const a=(0,n(7592).ZP)("div")((e=>{let{theme:t}=e;return{backgroundColor:t.palette.primary.light,minHeight:"100vh"}}));t.Z=a},2055:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var a=n(7313),s=n(8119),i=n(9099),r=n(2481),o=n(9666),l=n(3216),c=n(6330),d=n(891),m=n(9019),h=n(7829),u=n(9137),x=n(1113),g=n(178),p=n(7458),Z=n(6159),j=n(6573),f=n(1682),w=n(6287);var b=n(6135),v=n(6666),I=n.n(v),y=n(6417);const P=(0,p.Z)();class S extends a.Component{constructor(){super(),this.onChange=e=>{this.setState({[e.target.name]:e.target.value})},this.handleSubmit=e=>{e.preventDefault();const t={email:this.state.email,password:this.state.password};window.localStorage.setItem("email",this.state.email),window.localStorage.setItem("password",this.state.password),console.log("user",t),I()("#p_role").text("2"),console.log("role",I()("#p_role").text()),this.props.loginUser(t)},this.state={email:"",password:""},this.onChange=this.onChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),console.log(this.props)}render(){return(0,y.jsx)(Z.Z,{theme:P,children:(0,y.jsxs)(g.Z,{component:"main",maxWidth:"xs",children:[(0,y.jsx)(r.ZP,{}),(0,y.jsxs)(h.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,y.jsx)(s.Z,{sx:{m:1,bgcolor:"secondary.main"},children:(0,y.jsx)(u.Z,{})}),(0,y.jsx)(x.Z,{component:"h1",variant:"h5",children:"Iniciar sesi\xf3n"}),(0,y.jsxs)(h.Z,{component:"form",onSubmit:e=>this.handleSubmit(e),noValidate:!0,sx:{mt:1},children:[(0,y.jsx)(o.Z,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Correo electr\xf3nico",name:"email",autoComplete:"email",onChange:e=>this.onChange(e),value:this.state.email,autoFocus:!0}),(0,y.jsx)(o.Z,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Contrase\xf1a",type:"password",id:"password",onChange:e=>this.onChange(e),value:this.state.password,autoComplete:"current-password"}),(0,y.jsx)(l.Z,{control:(0,y.jsx)(c.Z,{value:"remember",color:"primary"}),label:"Acu\xe9rdate de m\xed"}),(0,y.jsx)(i.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Iniciar sesi\xf3n"}),(0,y.jsx)(m.ZP,{container:!0,justifyContent:"center",children:(0,y.jsx)(m.ZP,{item:!0,children:(0,y.jsx)(d.Z,{href:"/auth/register",variant:"body2",children:"No tengo una cuenta? Inscribirse"})})})]})]})]})})}}var C=(0,b.$j)((e=>({auth:e.auth})),{loginUser:e=>{console.log("user",e),j.Z.post(w.Z.API_URL+"api/users/login",e).then((e=>{if(1==e.data.success){window.localStorage.setItem("role","2");const{token:t}=e.data;localStorage.setItem("jwtToken",t),f.Z.success({description:"Welcome, User!",placement:"bottomRight",duration:2}),window.location.href="/dashboard"}})).catch((e=>{console.log(e),f.Z.error({description:"Sorry, User!",placement:"bottomRight",duration:2})}))}})(S)},9916:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var a=n(9466),s=n(7313),i=n(7648),r=n(9860),o=n(4813),l=n(9019),c=n(5898),d=n(1113),m=n(7547),h=n(6013),u=n(2055),x=n(6391),g=n(5184),p=n(1682),Z=n(8197),j=n(6744),f=n(4195),w=n(6370),b=n(891),v=n(7890),I=n(6573),y=n(6287),P=n(6202),S=n(6135),C=n(6417);var U=(0,S.$j)((e=>({wholeState:e})),{authLogin:P.eU,setUserData:P.M})((e=>{let{role:t,authLogin:n,setUserData:a,wholeState:s}=e;console.log("aaaaaaaaaaa",s);const i=(0,v.s0)();return(0,C.jsx)(Z.Z,{justify:"center",children:(0,C.jsxs)(j.Z,{name:"basic",onFinish:e=>{console.log("role",typeof t,t),"admin"===e.id&&1==t?(p.Z.success({description:"Bienvenida administradora!",placement:"bottomRight",duration:2}),n({name:"admin"}),window.localStorage.setItem("name","admin"),localStorage.setItem("jwtToken",""),window.localStorage.setItem("role","1"),i("/dashboard")):3==t?I.Z.post(y.Z.API_URL+"api/users/clientSave",{license:e.id}).then((t=>{n(t.data.agency),a(t.data.userdata),console.log("success",t.data.userdata),"success"==t.data.status&&(p.Z.success({description:"Bienvenida cliente!",placement:"bottomRight",duration:2}),window.localStorage.setItem("name",t.data.agency.name),window.localStorage.setItem("role","3"),window.localStorage.setItem("license",e.id),I.Z.get(y.Z.API_URL+"api/users/clientlist").then((()=>{i("/dashboard/client/profile")})))})).catch((e=>{"error"==e.response.data.status&&p.Z.warning({description:e.response.data.errors,placement:"bottomRight",duration:2}),console.log("err",e.response.data.status)})):2==t?I.Z.post(y.Z.API_URL+"api/users/login",{license:e.id}).then((t=>{console.log("aaaaafefeaaaaaa",t.data),window.localStorage.setItem("name",t.data.data.fname),window.localStorage.setItem("license",e.id),n(t.data),"success"==t.data.status&&(p.Z.success({description:"Bienvenida cliente!",placement:"bottomRight",duration:2}),window.localStorage.setItem("role","2"),I.Z.get(y.Z.API_URL+"api/users/clientlist").then((()=>{i("/dashboard")})))})).catch((e=>{p.Z.warning({description:e.response.data,placement:"bottomRight",duration:2})})):p.Z.error({description:"Sorry, incorrect input",placement:"bottomRight",duration:2})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,C.jsx)(j.Z.Item,{label:"Contrasena",name:"id",rules:[{required:!0,message:"Por favor ingrese su identificaci\xf3n!"}],children:(0,C.jsx)(f.Z,{placeholder:"Por favor ingrese su identificaci\xf3n"})}),(0,C.jsx)(j.Z.Item,{style:{textAlign:"center"},children:2==t?(0,C.jsx)(b.Z,{href:"/auth/register",variant:"body2",children:"No tengo una cuenta? Inscribirse"}):(0,C.jsx)(C.Fragment,{})}),(0,C.jsx)(j.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,C.jsx)(w.ZP,{type:"primary",htmlType:"submit",children:"Entrar"})})]})})}));var _=(0,S.$j)((e=>({wholeState:e})),{setSocket:P.uU})((()=>{const[e,t]=(0,s.useState)(1),n=(0,r.Z)(),p=(0,o.Z)(n.breakpoints.down("md"));return(0,C.jsx)(m.Z,{children:(0,C.jsxs)(l.ZP,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:[(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(l.ZP,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:(0,C.jsx)(l.ZP,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:(0,C.jsx)(h.Z,{children:(0,C.jsxs)(l.ZP,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[(0,C.jsx)(l.ZP,{item:!0,sx:{mb:3},style:{marginBottom:-10},children:(0,C.jsx)(a.rU,{to:"#",children:(0,C.jsx)(x.Z,{})})}),(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(l.ZP,{container:!0,direction:p?"column-reverse":"row",alignItems:"center",justifyContent:"center",children:(0,C.jsx)(l.ZP,{item:!0,children:(0,C.jsxs)(c.Z,{alignItems:"center",justifyContent:"center",spacing:1,children:[(0,C.jsx)(d.Z,{color:n.palette.secondary.main,gutterBottom:!0,fontSize:"26px",variant:p?"h3":"h2",children:"Hola, Bienvenido!"}),(0,C.jsx)(d.Z,{variant:"caption",fontSize:"16px",textAlign:p?"center":"inherit",children:"Elija su perfil"})]})})})}),(0,C.jsx)(l.ZP,{style:{marginTop:20},children:(0,C.jsxs)(i.ZP.Group,{onChange:e=>{console.log("radio checked",e.target.value),t(e.target.value)},value:e,size:"large",children:[(0,C.jsx)(i.ZP,{value:1,children:"Administradora"}),(0,C.jsx)(i.ZP,{value:2,children:"Usuaria"}),(0,C.jsx)(i.ZP,{value:3,children:"Gesto/Asesoria"})]})}),(0,C.jsx)(l.ZP,{item:!0,xs:12,children:1===e||3===e||2==e?(0,C.jsx)(U,{role:e}):(0,C.jsx)(u.default,{role:e})}),(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(l.ZP,{item:!0,container:!0,direction:"column",alignItems:"center",xs:12})})]})})})})}),(0,C.jsx)(l.ZP,{item:!0,xs:12,sx:{m:3,mt:1},children:(0,C.jsx)(g.Z,{})})]})})}))}}]);