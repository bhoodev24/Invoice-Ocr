"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[55],{2055:function(e,t,s){s.r(t),s.d(t,{default:function(){return I}});var a=s(7313),o=s(8119),r=s(9099),n=s(2481),i=s(9666),l=s(3216),c=s(6330),h=s(891),d=s(9019),m=s(7829),u=s(9137),p=s(1113),g=s(178),x=s(7458),b=s(6159),w=s(6573),Z=s(1682),j=s(6287);var f=s(6135),C=s(6666),v=s.n(C),S=s(6417);const _=(0,x.Z)();class y extends a.Component{constructor(){super(),this.onChange=e=>{this.setState({[e.target.name]:e.target.value})},this.handleSubmit=e=>{e.preventDefault();const t={email:this.state.email,password:this.state.password};window.localStorage.setItem("email",this.state.email),window.localStorage.setItem("password",this.state.password),console.log("user",t),v()("#p_role").text("2"),console.log("role",v()("#p_role").text()),this.props.loginUser(t)},this.state={email:"",password:""},this.onChange=this.onChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),console.log(this.props)}render(){return(0,S.jsx)(b.Z,{theme:_,children:(0,S.jsxs)(g.Z,{component:"main",maxWidth:"xs",children:[(0,S.jsx)(n.ZP,{}),(0,S.jsxs)(m.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,S.jsx)(o.Z,{sx:{m:1,bgcolor:"secondary.main"},children:(0,S.jsx)(u.Z,{})}),(0,S.jsx)(p.Z,{component:"h1",variant:"h5",children:"Iniciar sesi\xf3n"}),(0,S.jsxs)(m.Z,{component:"form",onSubmit:e=>this.handleSubmit(e),noValidate:!0,sx:{mt:1},children:[(0,S.jsx)(i.Z,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Correo electr\xf3nico",name:"email",autoComplete:"email",onChange:e=>this.onChange(e),value:this.state.email,autoFocus:!0}),(0,S.jsx)(i.Z,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Contrase\xf1a",type:"password",id:"password",onChange:e=>this.onChange(e),value:this.state.password,autoComplete:"current-password"}),(0,S.jsx)(l.Z,{control:(0,S.jsx)(c.Z,{value:"remember",color:"primary"}),label:"Acu\xe9rdate de m\xed"}),(0,S.jsx)(r.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Iniciar sesi\xf3n"}),(0,S.jsx)(d.ZP,{container:!0,justifyContent:"center",children:(0,S.jsx)(d.ZP,{item:!0,children:(0,S.jsx)(h.Z,{href:"/auth/register",variant:"body2",children:"No tengo una cuenta? Inscribirse"})})})]})]})]})})}}var I=(0,f.$j)((e=>({auth:e.auth})),{loginUser:e=>{console.log("user",e),w.Z.post(j.Z.API_URL+"api/users/login",e).then((e=>{if(1==e.data.success){window.localStorage.setItem("role","2");const{token:t}=e.data;localStorage.setItem("jwtToken",t),Z.Z.success({description:"Welcome, User!",placement:"bottomRight",duration:2}),window.location.href="/dashboard"}})).catch((e=>{console.log(e),Z.Z.error({description:"Sorry, User!",placement:"bottomRight",duration:2})}))}})(y)}}]);