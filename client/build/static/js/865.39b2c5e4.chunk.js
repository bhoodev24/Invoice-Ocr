"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[865],{6865:function(e,n,t){t.r(n);var a=t(7313),s=t(1682),r=t(8197),i=t(6968),l=t(6370),o=t(9624),c=t(6015),d=t(253),u=t(765),p=t(5566),h=t.n(p),m=t(1404),g=t.n(m),x=t(3523),j=t(9466),y=t(2461),Z=t(9666),f=t(6573),v=t(6287),b=t(2549),C=t(3997),w=t.n(C),I=t(3071),S=t(2231),P=t(6417);n.default=()=>{const[e,n]=(0,a.useState)(""),[t,p]=(0,a.useState)(""),[m,C]=(0,a.useState)(""),[k,B]=(0,a.useState)(6),[U,R]=(0,a.useState)(.2),[_,D]=(0,a.useState)(""),[A,E]=(0,a.useState)(""),[N,T]=(0,a.useState)(""),[W,L]=(0,a.useState)(""),[F,z]=(0,a.useState)(""),[V,K]=(0,a.useState)(""),[G,M]=(0,a.useState)("");(0,a.useEffect)((()=>{$()}),[]);const $=()=>{f.Z.get(v.Z.API_URL+"api/users/clientlist").then((e=>{console.log(e);let t=e.data.data;for(let n=0;n<t.length;n++)t[n].key=(0,b.Z)(),t[n].no=n+1,t[n].profile="Perfil";n(t),M(t)}))},[q,H]=(0,a.useState)(""),[O,J]=(0,a.useState)(""),Q=(0,a.useRef)(null),X=(0,a.useRef)(null),Y=new(g().Workbook),ee=[];const ne=(e,t,a)=>{let s=0,r=[];e[0]?(G.map((n=>{n[a]==e[0]&&r.push(n)})),r.map((e=>{e.no=s+1,s++})),console.log("handle",r),n(r)):(r=G,r.map((e=>{e.no=s+1,s++})),n(r))},te=e=>({filterDropdown:n=>{let{setSelectedKeys:t,selectedKeys:a,confirm:s,clearFilters:o,close:c}=n;return(0,P.jsxs)(r.Z,{style:{padding:8},onKeyDown:e=>e.stopPropagation(),children:[(0,P.jsx)(y.Z,{ref:Q,placeholder:`Buscar ${e}`,value:a[0],onChange:e=>t(e.target.value?[e.target.value]:[]),onPressEnter:()=>ne(a,0,e),style:{marginBottom:8,display:"block"}}),(0,P.jsxs)(i.Z,{children:[(0,P.jsx)(l.ZP,{type:"primary",onClick:()=>ne(a,0,e),icon:(0,P.jsx)(u.Z,{}),size:"small",style:{width:90},children:"Buscar"}),(0,P.jsx)(l.ZP,{onClick:()=>o&&(e=>{e(),H("")})(o),size:"small",style:{width:90},children:"reiniciar"}),(0,P.jsx)(l.ZP,{type:"link",size:"small",onClick:()=>{s({closeDropdown:!1}),H(a[0]),J(e)},children:"Filtrar"}),(0,P.jsx)(l.ZP,{type:"link",size:"small",onClick:()=>{c()},children:"cerca"})]})]})},filterIcon:e=>(0,P.jsx)(u.Z,{style:{color:e?"#1677ff":void 0}}),onFilter:(n,t)=>t[e].toString().toLowerCase().includes(n.toLowerCase()),onFilterDropdownOpenChange:e=>{e&&setTimeout((()=>{var e;return null===(e=Q.current)||void 0===e?void 0:e.select()}),100)},render:n=>O===e?(0,P.jsx)(h(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[q],autoEscape:!0,textToHighlight:n?n.toString():""}):n}),ae=[{title:"No",dataIndex:"no",align:"center"},{title:"ID",dataIndex:"id",align:"center",width:"10%",...te("id")},{title:"nombre",dataIndex:"name",align:"center",width:"20%",...te("name")},{title:"CIF/DNI",dataIndex:"cif",align:"center",...te("cif")},{title:"Usuarias",dataIndex:"userNum",align:"center"},{title:"Perfil del cliente",dataIndex:"profile",align:"center",render:(n,t)=>(0,P.jsx)(j.rU,{to:"/dashboard/admin/agency_profile/"+e[t.no-1]._id,children:n})}];return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(r.Z,{justify:"space-between",children:(0,P.jsx)(o.Z,{span:12,children:(0,P.jsx)("h2",{children:"Lista de Agencias"})})}),(0,P.jsx)(r.Z,{children:(0,P.jsxs)(o.Z,{span:24,children:[(0,P.jsx)(c.Z,{ref:X,columns:ae,dataSource:e,rowKey:"no",size:"middle"}),(0,P.jsx)(r.Z,{align:"center",style:{marginTop:20},children:(0,P.jsx)(l.ZP,{type:"primary",size:"large",onClick:async()=>{const e=X.current,n=Array.from(e.getElementsByTagName("tr")).map((e=>Array.from(e.getElementsByTagName("td")).map((e=>e.innerText))));for(let a=1;a<n.length;a++)ee.push(n[a]);try{const e=Y.addWorksheet("agency");e.columns=ae,e.columns.forEach((e=>{e.width=20,e.alignment={horizontal:"center"}})),ee.forEach((n=>{e.addRow(n)}));const n=await Y.xlsx.writeBuffer();(0,x.saveAs)(new Blob([n]),"agency.xlsx"),s.Z.success({description:"\xc9xito de exportaci\xf3n!",placement:"bottomRight",duration:2})}catch(t){console.log(t),s.Z.error({description:"Exportaci\xf3n fallida!",placement:"bottomRight",duration:2})}console.log("ttt",n)},children:"Exportar"})})]})}),(0,P.jsx)(r.Z,{children:(0,P.jsx)(o.Z,{span:12,children:(0,P.jsx)("h2",{children:"Agencias de datos"})})}),(0,P.jsxs)(r.Z,{justify:"space-evenly",style:{marginBottom:10},children:[(0,P.jsx)(o.Z,{span:8,align:"center",children:(0,P.jsx)(Z.Z,{id:"standard-basic",fullWidth:!0,value:t,onChange:e=>{p(e.target.value)},label:"Nombre",variant:"standard"})}),(0,P.jsx)(o.Z,{span:8,align:"center",children:(0,P.jsxs)(r.Z,{style:{alignItems:"center",justifyContent:"center"},children:[(0,P.jsx)(o.Z,{span:12,children:(0,P.jsx)("div",{children:"Cuota mensual"})}),(0,P.jsx)(o.Z,{span:6,children:(0,P.jsx)(d.Z,{min:6,max:1e5,defaultValue:6,value:k,onChange:e=>{B(e)}})})]})})]}),(0,P.jsxs)(r.Z,{justify:"space-evenly",style:{marginBottom:10},children:[(0,P.jsx)(o.Z,{span:8,align:"center",children:(0,P.jsx)(Z.Z,{id:"standard-basic",fullWidth:!0,value:m,onChange:e=>{C(e.target.value)},label:"CIF/DNI",variant:"standard"})}),(0,P.jsx)(o.Z,{span:8,align:"center",children:(0,P.jsxs)(r.Z,{style:{alignItems:"center",justifyContent:"center"},children:[(0,P.jsx)(o.Z,{span:12,children:(0,P.jsx)("div",{children:"Consumo por p\xe1gina"})}),(0,P.jsx)(o.Z,{span:6,children:(0,P.jsx)(d.Z,{min:.2,max:1e5,defaultValue:.2,value:U,onChange:e=>{R(e)}})})]})})]}),(0,P.jsxs)(r.Z,{justify:"space-evenly",style:{marginBottom:10},children:[(0,P.jsx)(o.Z,{span:8,align:"center",children:(0,P.jsx)(Z.Z,{id:"standard-basic",value:_,onChange:e=>{D(e.target.value)},fullWidth:!0,label:"Cuenta Bancaria",variant:"standard"})}),(0,P.jsx)(o.Z,{span:8,align:"center",children:(0,P.jsx)(Z.Z,{id:"standard-basic",value:A,onChange:e=>{E(e.target.value)},fullWidth:!0,label:"N\xfamero de Licencia",variant:"standard"})})]}),(0,P.jsxs)(r.Z,{justify:"space-evenly",style:{marginBottom:10},children:[(0,P.jsx)(o.Z,{span:8,align:"center",children:(0,P.jsx)(Z.Z,{id:"standard-basic",value:N,onChange:e=>{T(e.target.value)},fullWidth:!0,label:"Nombre de Contacto",variant:"standard"})}),(0,P.jsx)(o.Z,{span:8,align:"center",children:(0,P.jsx)(Z.Z,{id:"standard-basic",value:W,onChange:e=>{L(e.target.value)},fullWidth:!0,label:"Agencia ID",variant:"standard"})})]}),(0,P.jsxs)(r.Z,{justify:"space-evenly",style:{marginBottom:10},children:[(0,P.jsx)(o.Z,{span:8,align:"center",children:(0,P.jsx)(Z.Z,{id:"standard-basic",value:F,onChange:e=>{z(e.target.value)},fullWidth:!0,label:"Tel\xe9fono",variant:"standard"})}),(0,P.jsx)(o.Z,{span:8,align:"center",children:(0,P.jsx)(l.ZP,{type:"primary",children:"Restablecer Licencia"})})]}),(0,P.jsxs)(r.Z,{justify:"space-evenly",style:{marginBottom:10},children:[(0,P.jsx)(o.Z,{span:8,align:"center",children:(0,P.jsx)(y.Z,{id:"standard-basic",value:V,onChange:e=>{K(e.target.value)},fullWidth:!0,label:"Mail",variant:"standard"})}),(0,P.jsx)(o.Z,{span:8,align:"center"})]}),(0,P.jsxs)(r.Z,{justify:"space-evenly",style:{marginBottom:10},children:[(0,P.jsx)(o.Z,{span:8,children:(0,P.jsx)(l.ZP,{type:"primary",children:"Enviar Mail"})}),(0,P.jsx)(o.Z,{span:8,children:(0,P.jsx)("div",{children:"Total documentos en este ano : 0"})})]}),(0,P.jsxs)(r.Z,{justify:"space-evenly",style:{marginBottom:10},children:[(0,P.jsx)(o.Z,{span:8,children:(0,P.jsx)(l.ZP,{type:"primary",children:"Enviar Notificatioin"})}),(0,P.jsx)(o.Z,{span:8,children:(0,P.jsx)("div",{children:"Total documentos en este mes : 0"})})]}),(0,P.jsxs)(r.Z,{justify:"space-evenly",style:{marginBottom:10},children:[(0,P.jsx)(o.Z,{span:8,children:(0,P.jsx)(l.ZP,{type:"primary",children:"Crear evento"})}),(0,P.jsx)(o.Z,{span:8})]}),(0,P.jsxs)(r.Z,{justify:"space-evenly",style:{marginBottom:10},children:[(0,P.jsx)(o.Z,{span:8,children:(0,P.jsx)(l.ZP,{type:"primary",children:"Crear alarma"})}),(0,P.jsx)(o.Z,{span:8})]}),(0,P.jsxs)(r.Z,{justify:"space-evenly",style:{marginBottom:10},children:[(0,P.jsx)(o.Z,{span:8}),(0,P.jsx)(o.Z,{span:8})]}),(0,P.jsxs)(r.Z,{justify:"space-evenly",children:[(0,P.jsx)(I.Z,{beforeUpload:function(e){const n=new FileReader;n.onload=async function(){const e=n.result,t=w().parse(e,{header:!0});console.log(t.data),s.Z.success({description:"Registro exitoso!",placement:"bottomRight",duration:2}),t.data.map((async e=>{let n=e;console.log("ret",e),await f.Z.post(v.Z.API_URL+"api/users/add_agency",n),$()}))},n.readAsText(e)},showUploadList:!1,children:(0,P.jsx)(l.ZP,{type:"primary",icon:(0,P.jsx)(S.Z,{}),children:"Upload CSV File"})}),(0,P.jsx)(l.ZP,{type:"primary",onClick:()=>{if(""==t||""==m||""==_||""==A||""==N||""==F||""==V)return s.Z.warning({description:"Tienes que cumplir con todos los campos de valor.",placement:"bottomRight",duration:2});if(!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(.\w{2,3})+$/.test(V))return s.Z.warning({description:"Please enter a valid email address.",placement:"bottomRight",duration:2});f.Z.post(v.Z.API_URL+"api/users/add_agency",{name:t,cif:m,consumption:U,fee:k,bankAccount:_,license:A,contactName:N,id:W,phone:F,mail:V}).then((()=>{$(),s.Z.success({description:" Guardar \xe9xito!",placement:"bottomRight",duration:2})})).catch((e=>{console.log(e)}))},children:"Guardar"})]})]})}},2549:function(e,n,t){t.d(n,{Z:function(){return c}});var a={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let s;const r=new Uint8Array(16);function i(){if(!s&&(s="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(r)}const l=[];for(let d=0;d<256;++d)l.push((d+256).toString(16).slice(1));function o(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(l[e[n+0]]+l[e[n+1]]+l[e[n+2]]+l[e[n+3]]+"-"+l[e[n+4]]+l[e[n+5]]+"-"+l[e[n+6]]+l[e[n+7]]+"-"+l[e[n+8]]+l[e[n+9]]+"-"+l[e[n+10]]+l[e[n+11]]+l[e[n+12]]+l[e[n+13]]+l[e[n+14]]+l[e[n+15]]).toLowerCase()}var c=function(e,n,t){if(a.randomUUID&&!n&&!e)return a.randomUUID();const s=(e=e||{}).random||(e.rng||i)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,n){t=t||0;for(let e=0;e<16;++e)n[t+e]=s[e];return n}return o(s)}}}]);